{% extends 'base.html.twig' %}

{% block title %}Hello CollectionController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="collections main-card rounded p-4 pb-0 my-4">
        <h1 class="display-4 text-primary mb-4">Largest collections</h1>
        <div class="collections-cards">
                <div class="row">
                        {% for collection in collections %}
                                <div class="pb-4 col-xl-6">
                                        <div class="card collection h-100">
                                                <div class="row g-0 h-100 overflow-hidden">
                                                        <div class="col-12 col-sm-3 col-xl-4">
                                                                <img src="{{ asset('uploads/images/' ~ collection.image.path) }}" class="img-fluid rounded-start h-100 w-100 object-fit-cover" alt="{{ collection.name }}-image">
                                                        </div>
                                                        <div class="col-12 col-sm-9 col-xl-8">
                                                                <div class="card-body h-100 d-flex flex-column justify-content-between">
                                                                        <div class="text mb-4">
                                                                                <div class="text-header d-flex justify-content-between">
                                                                                        <h5 class="card-title">{{ collection.name|capitalize }}</h5>
                                                                                        <h5 class="card-title text-primary">{{ collection.getUser.getUsername }}</h5>
                                                                                </div>
                                                                                <p class="card-text">{{ collection.description|slice(0, 120) }}...</p>
                                                                        </div>
                                                                        <div class="bottom">
                                                                                <h6>Number of items : <span class="text-primary">{{ collection.getItems|length }}</span></h6>
                                                                                <div class="footer d-flex justify-content-between align-items-end" style="min-height: 33px">
                                                                                        <small class="text-muted align-middle">{{ collection.dateAdd|date("d.m.Y") }}</small>
                                                                                        <a class="btn btn-primary btn-sm" href="{{ path('app_collection_view', {'id': collection.getId}) }}" role="button">View collection</a>
                                                                                </div>
                                                                        </div>

                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                        {% endfor %}
                </div>
        </div>
</div>
<div class="collections main-card rounded p-4 pb-0 my-4">
        <h1 class="display-4 text-primary mb-4">Last added items</h1>
        <div class="items-cards">
                <div class="row">
                        {% for item in collections[0].getItems %}
                                <div class="pb-4 col-12">
                                        <div class="card item h-100">
                                                <div class="row g-0 h-100 overflow-hidden">
                                                        <div class="col-12">
                                                                <div class="card-body h-100 d-flex flex-column justify-content-between">
                                                                        <div class="text mb-2">
                                                                                <div class="text-header d-flex justify-content-between">
                                                                                        <div class="d-flex">
                                                                                                <h6 class="me-4 text-muted">Collection : <a href="{{ path('app_collection_view',{'id': item.getItemCollection.getId}) }}">{{ item.getItemCollection.getName }}</a></h6>
                                                                                                <h6 class="text-muted">Category : <a href="#">{{ item.getItemCollection.getCategory.getName }}</a></h6>
                                                                                        </div>
                                                                                        <h5 class="card-title text-primary">{{ item.getItemCollection.getUser.getUsername }}</h5>
                                                                                </div>
                                                                        </div>
                                                                        <div class="bottom">
                                                                                <div class="footer d-flex justify-content-between align-items-end" style="min-height: 33px">
                                                                                        <div class="display-6 card-title">{{ item.getName|capitalize }}</div>
                                                                                </div>
                                                                                <div class="date-and-button d-flex justify-content-between align-items-center">
                                                                                        <small class="text-muted align-middle me-4" >{{ item.dateAdd|date("d.m.Y") }}</small>
                                                                                        <a class="btn btn-primary btn-sm" href="{{ path('app_item', {'idCollection': item.getItemCollection.getId, 'idItem' : item.getId}) }}" role="button">View item</a>
                                                                                </div>
                                                                        </div>

                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                        {% endfor %}
                </div>
        </div>
</div>


{% endblock %}
